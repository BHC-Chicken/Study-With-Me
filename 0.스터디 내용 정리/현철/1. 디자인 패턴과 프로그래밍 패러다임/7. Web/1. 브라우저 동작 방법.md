# 브라우저 동작 방법
우리가 주소창에 URL을 입력하고 엔터를 누르는 순간부터 화면에 웹페이지가 표시되기까지는 생각보다 복잡한 과정이 숨어 있다. 하나씩 살펴보자.

## 1. 사용자의 입력 - 주소창에 URL 입력
먼저 사용자가 브라우저 주소창에 URL을 입력한다. 예를 들어 https://www.google.com 을 입력했다고 가정해 보자.

브라우저는 이때 다음 과정을 거친다. :

1. URL 파싱 (Parsing)
2. 프로토콜(https), 호스트(example.com), 경로(/) 등을 분석
3. DNS 조회 (Domain Name System)
4. www.googlecom이 실제로 어떤 IP 주소를 가리키는지 찾음
5. 이 과정은 캐시(DNS Cache) → OS → 라우터 → ISP → DNS 서버 순으로 진행
6. 결과적으로 브라우저는 서버의 IP 주소를 얻어냄

## 2. 네트워크 요청 — 서버와 통신하기
IP 주소를 알게 되면 브라우저는 해당 서버에 HTTP(S) 요청(Request) 을 보낸다.

### HTTPS일 경우
먼저 TLS Handshake 과정을 거쳐 암호화된 연결을 설정한다. 이후 실제 요청 데이터(헤더, 쿠키 등)가 전송된다. 요청이 서버에 도착하면, 서버는 이를 처리하고 HTTP 응답(Response) 을 반환한다.

응답에는 보통 다음이 포함된다.
- HTML 문서 (핵심)
- 상태 코드 (200, 404, 500 등)
- 헤더 (Cache-Control, Content-Type 등)
- 쿠키

## 3. 렌더링 과정 — HTML → 화면으로 변환
서버로부터 받은 HTML 문서는 이제 브라우저 내부에서 변환된다.
이 과정을 렌더링(Rendering) 이라고한다.

1. HTML 파싱 → DOM 트리 구성
   - HTML 태그를 읽어 DOM(Document Object Model) 을 만든다.
   - DOM은 문서의 구조를 트리 형태로 표현한 것이다.
2. CSS 파싱 → CSSOM 트리 구성
   - 외부 CSS 파일이나 \<style\> 태그를 읽어 CSS Object Model 을 생성한다.
3. 렌더 트리(Render Tree) 생성
   - DOM + CSSOM 을 결합해 화면에 표시할 요소들만 포함한 렌더 트리를 만든다.
4. 레이아웃(Layout)
   - 각 요소의 크기, 위치를 계산한다. (예: 부모의 width에 따라 자식 요소의 위치를 결정)
5. 페인트(Paint)
   - 계산된 정보를 바탕으로 화면에 실제 픽셀을 그린다.

이렇게 최종적으로 눈에 보이는 웹페이지가 완성된다.

## 4. 자바스크립트 실행 — 동적인 페이지 완성

렌더링 도중 \<script\> 태그를 만나면, 브라우저는 자바스크립트 엔진(V8 등) 으로 코드를 실행한다.

자바스크립트의 역할
 - DOM 조작 (예: 버튼 클릭 시 글자 변경)
 - AJAX 요청으로 새로운 데이터 받아오기
 - 이벤트 핸들링, 애니메이션, 상태 관리 등

주의할 점
 - 자바스크립트는 싱글 스레드 기반이므로, 긴 연산이 있으면 렌더링이 지연될 수 있다.
 - 이를 보완하기 위해 브라우저는 Event Loop, Web API, Callback Queue 등을 통해 비동기 동작을 관리한다.

## 5. 최적화와 캐싱 — 더 빠른 웹을 위해
브라우저는 성능 향상을 위해 다양한 캐싱 전략을 사용한다.
- HTTP 캐시: 서버 응답 헤더의 Cache-Control 또는 ETag 기준으로 재사용
- DNS 캐시: 이전에 방문한 도메인의 IP를 일정 시간 동안 저장
- Service Worker: 오프라인에서도 웹앱을 동작시키기 위한 캐시 관리


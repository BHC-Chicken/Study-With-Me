# 쿠키 & 세션
웹의 근본적인 특징 중 하나는 HTTP의 비연결성(stateless) 이다.
즉, 서버는 요청이 끝나면 그 사용자를 기억하지 않는다. 하지만 우리가 웹사이트를 이용할 때, 로그인 정보나 장바구니 내역이 계속 유지되는 것을 볼 수 있다.
그 비밀이 바로 쿠키(Cookie) 와 세션(Session)이다.

## 쿠키
쿠키는 브라우저가 보관하는 작은 데이터 조각이다. 서버가 응답 시 “Set-Cookie” 헤더를 통해 쿠키를 클라이언트에 전달하면, 브라우저는 그 쿠키를 이후의 요청마다 자동으로 서버에 함께 전송한다.

```text
쿠키 구조 예시

Set-Cookie: userId=hong; Path=/; Expires=Wed, 09 Nov 2025 09:00:00 GMT; Secure; HttpOnly
```

### 주요 속성
| 속성                    | 설명                       |
| --------------------- | ------------------------ |
| **Name=Value**        | 쿠키 이름과 값                 |
| **Domain / Path**     | 어떤 URL에서 이 쿠키를 보낼지 지정    |
| **Expires / Max-Age** | 쿠키의 유효기간                 |
| **Secure**            | HTTPS에서만 전송              |
| **HttpOnly**          | 자바스크립트에서 접근 불가 (XSS 방지용) |


### 쿠키의 장점
- 별도 서버 저장소가 필요 없음
- 서버가 아닌 클라이언트 측에서 간단히 상태 관리 가능

### 쿠키의 단점
- 브라우저에 저장되므로 보안에 취약 (노출 가능성)
- 용량 제한 (대부분 브라우저에서 도메인당 약 4KB)
- 요청마다 자동 전송되어 트래픽 증가

## 세션
세션은 쿠키의 한계를 보완하기 위해 등장했다. 사용자 정보를 서버 측에서 관리하는 방식입니다.

### 동작 원리
1. 사용자가 로그인 성공 → 서버가 세션 ID(Session ID) 생성
2. 서버 메모리(DB, Redis 등)에 세션 ID와 사용자 정보를 저장
3. 클라이언트에는 단순히 세션 ID만 쿠키 형태로 저장
4. 이후 요청 시 세션 ID를 쿠키로 전송하면, 서버가 ID를 조회해 사용자 식별

즉, 브라우저는 자신의 세션 ID만 전달하고, 실제 데이터(로그인 상태 등)는 서버가 기억하고 있는 구조다.

## JWT
JWT는 쿠키나 세션처럼 서버에 상태를 저장하지 않아도 되며, 토큰 자체에 인증 정보를 담고 있어 “무상태(stateless)” 인증이 가능하다.
- 세션 기반: 서버가 상태를 저장 (stateful)
- JWT 기반: 클라이언트가 토큰을 저장 (stateless)
따라서 JWT는 서버 확장성(Scale-out) 이 중요한 환경에서 선호